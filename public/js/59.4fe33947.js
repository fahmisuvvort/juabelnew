(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[59],{9800:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",[i("q-header",[i("q-toolbar",[i("q-btn",{attrs:{to:{name:"SellerHome"},flat:"",round:"",dense:"",icon:"arrow_back"}}),i("q-toolbar-title",[t._v("\n       Gudang Pengiriman\n      ")])],1)],1),i("div",[i("q-form",{on:{submit:function(e){return e.preventDefault(),t.updateData(e)}}},[i("q-card",{attrs:{flat:""}},[i("q-card-section",[i("div",{staticClass:"flex items-center justify-between"},[i("div",{staticClass:"text-md text-weight-bold"},[t._v("Pengaturan Gudang Pengiriman")])]),i("div",{staticClass:"q-mt-md"},[i("div",{staticClass:"text-q-pa-xs text-grey-9"},[t._v("Nama Toko")]),i("q-input",{attrs:{filled:""},model:{value:t.form.shop_name,callback:function(e){t.$set(t.form,"shop_name",e)},expression:"form.shop_name"}}),t.config&&t.config.is_shippable?i("div",{staticClass:"q-mt-md"},[i("div",{staticClass:"text-q-pa-xs text-grey-9"},[t._v("Gudang Pengiriman")]),i("div",{staticClass:"cursor-pointer q-pa-md full-width border q-filled",on:{click:t.changeWarehouse}},[t._v(t._s(t.warehouseTitle()))])]):t._e()],1)]),i("q-card-actions",{staticClass:"q-pa-md justify-end"},[i("q-btn",{attrs:{type:"submit",label:"Simpan Pengaturan",color:"primary"}})],1)],1)],1),i("q-dialog",{model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[i("q-card",{staticStyle:{width:"100%","max-width":"500px"}},[i("q-card-section",[i("div",{staticClass:"flex items-center justify-between"},[i("div",{staticClass:"text-md text-weight-bold q-mb-sm"},[t._v("Pilih Gudang Pengiriman")]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",icon:"close"}})],1),i("div",{staticClass:"q-pa-sm q-gutter-y-sm"},[i("q-input",{ref:"warehouse",attrs:{loading:t.searchLoading&&"warehouse"==t.searchType,placeholder:"Ketik nama kecamatan",debounce:"1000"},on:{input:t.searchWarehouseData},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),i("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},["warehouse"==t.searchType&&t.subdistrictOptions.length?i("div",{staticClass:"relative bg-grey-2",staticStyle:{"min-height":"100px","max-height":"300px","overflow-y":"auto"}},[i("q-list",t._l(t.subdistrictOptions,(function(e){return i("q-item",{key:e.id,attrs:{clickable:""},on:{click:function(i){return t.selectSubdistrict(e)}}},[i("q-item-section",[i("q-item-label",[t._v(t._s(e.subdistrict_name)+" - "+t._s(e.type)+" "+t._s(e.city))])],1)],1)})),1),i("q-inner-loading",{attrs:{showing:t.searchLoading}})],1):t._e()])],1)])],1)],1)],1)],1)},a=[],r=i("ded3"),n=i.n(r),o=(i("99af"),i("caad"),i("2532"),i("4de4"),i("a15b"),i("ac1f"),i("841c"),i("a434"),i("b0c0"),i("d3b7"),i("e6cf"),i("a79d"),i("758b")),c={name:"Ekspedisi",data:function(){return{codListModal:!1,modal:!1,rajaongkirtypes:["starter","basic","pro"],subdistrictOptions:[],search:"",isWarehouseSearch:!1,searchType:"cod",searchLoading:!1,form:{shop_name:"",warehouse:null}}},computed:{config:function(){return this.$store.state.config}},mounted:function(){this.getSeller()},methods:{changeWarehouse:function(){var t=this;this.modal=!0,setTimeout((function(){t.$refs.warehouse.focus()}),300)},warehouseTitle:function(){return this.form.warehouse?"".concat(this.form.warehouse.subdistrict_name," - ").concat(this.form.warehouse.type," ").concat(this.form.warehouse.city,", ").concat(this.form.warehouse.province):"Pilih Gudang Pengiriman"},setConfig:function(t){this.form.warehouse=t.warehouse,this.form.shop_name=t.shop_name},selectCourierType:function(){this.form.rajaongkir_couriers=""},isCourierActive:function(t){return!!this.courierHasSelect.length&&!!this.courierHasSelect.includes(t)},handleSelectCourier:function(t){var e=this.courierHasSelect;e.includes(t)?e=e.filter((function(e){return e!=t})):e.push(t),e.length&&(this.form.rajaongkir_couriers=e.join(","))},showNotify:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t?this.$q.notify({type:"negative",message:"Gagal memperbarui data"}):this.$q.notify({type:"positive",message:"Berhasil memperbarui data"})},updateData:function(){var t=this;Object(o["a"])().post("updateSeller",this.form).then((function(){t.$store.dispatch("getAdminConfig"),t.showNotify()})).catch((function(){t.showNotify(error)}))},submitWarehouse:function(){this.updateData()},setLoading:function(t){this.$store.commit("SET_LOADING",t)},selectSubdistrict:function(t){this.form.warehouse_id=t.city_id,this.form.warehouse=t,this.modal=!1,this.subdistrictOptions=[],this.search=""},selectCodItemData:function(t){var e=this.form.cod_list.filter((function(e){return e.subdistrict_id==t.subdistrict_id}));e.length&&(this.form.cod_list=this.form.cod_list.filter((function(e){return e.subdistrict_id!=t.subdistrict_id}))),this.form.cod_list.push(n()(n()({},t),{},{price:0})),this.search="",this.subdistrictOptions=[]},isInWarehouseItem:function(t){return this.form.warehouse.subdistrict_id==t.subdistrict_id},hasCodData:function(t){var e=this.form.cod_list.filter((function(e){return e.subdistrict_id==t.subdistrict_id}));return!!e.length},removeCodList:function(t){this.form.cod_list.splice(t,1)},searchWarehouseData:function(){this.searchType="warehouse",this.findSubdistrict()},searchCodData:function(){this.searchType="cod",this.findSubdistrict()},getSeller:function(){var t=this;Object(o["a"])().get("getSeller").then((function(e){200==e.status&&(t.form.shop_name=e.data.results.name,t.form.warehouse=e.data.results.warehouse)}))},findSubdistrict:function(){var t=this;this.subdistrictOptions=[],this.search.length<3||(this.searchLoading=!0,Object(o["a"])().get("shipping/findSubdistrict/"+this.search).then((function(e){200==e.status&&(e.data.success?t.subdistrictOptions=e.data.results:t.$q.notify({type:"negative",message:e.data.message}))})).finally((function(){t.searchLoading=!1})))},closeSubdistrictBox:function(){this.subdistrictOptions=[],this.search=""}}},u=c,d=i("2877"),h=i("9989"),l=i("e359"),f=i("65c6"),m=i("9c40"),p=i("6ac5"),b=i("0378"),g=i("f09f"),v=i("a370"),_=i("27f9"),w=i("4b7e"),y=i("24e8"),q=i("1c1c"),C=i("66e5"),S=i("4074"),x=i("0170"),k=i("74f7"),Q=i("7f67"),O=i("eebe"),T=i.n(O),L=Object(d["a"])(u,s,a,!1,null,null,null);e["default"]=L.exports;T()(L,"components",{QPage:h["a"],QHeader:l["a"],QToolbar:f["a"],QBtn:m["a"],QToolbarTitle:p["a"],QForm:b["a"],QCard:g["a"],QCardSection:v["a"],QInput:_["a"],QCardActions:w["a"],QDialog:y["a"],QList:q["a"],QItem:C["a"],QItemSection:S["a"],QItemLabel:x["a"],QInnerLoading:k["a"]}),T()(L,"directives",{ClosePopup:Q["a"]})}}]);