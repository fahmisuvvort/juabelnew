(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[33],{"8ee8":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("q-header",[a("q-toolbar",[a("q-btn",{attrs:{to:{name:"Settings"},flat:"",round:"",dense:"",icon:"arrow_back"}}),a("q-toolbar-title",[e._v("\n       List Kategori\n      ")]),a("q-btn",{staticClass:"gt-xs",attrs:{flat:"",label:"Tambah Kategori","no-caps":"",icon:"add_circle"},on:{click:e.addButton}})],1)],1),a("div",[e.categories.data.length?[a("category-block",{ref:"refCategory",attrs:{editable:"",categories:e.categories.data},on:{onRemove:e.onRemoveCategory,onClear:e.onClearSelectableCategory,onEdit:e.onEditButton}})]:e._e()],2),a("q-inner-loading",{attrs:{showing:!e.categories.ready}},[a("q-spinner-facebook",{attrs:{size:"50px",color:"primary"}})],1),a("q-page-sticky",{staticClass:"lt-sm",attrs:{position:"bottom-right",offset:[18,18]}},[a("q-btn",{staticClass:"gt-xs",attrs:{flat:"",label:"Tambah Kategori","no-caps":"",icon:"add_circle"},on:{click:e.addButton}})],1),a("q-dialog",{model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[a("q-card",{staticStyle:{"max-width":"500px",width:"90%","max-height":"100%"}},[e.isOpenSelect?a("div",[a("div",{staticClass:"bg-white relative"},[a("div",{staticClass:"scroll q-pa-md",staticStyle:{"max-height":"800px",overflow:"auto"}},[a("category-block",{ref:"category",attrs:{selectable:"",categories:e.categories.data},on:{onClose:e.onCloseSelectableCategory,onSelect:e.onSelectCategory}})],1)])]):e._e(),e.isOpenSelect?e._e():a("div",{staticClass:"q-pa-md"},[!e.categorySelected&&e.categories.data.length?a("q-input",{attrs:{readonly:"",label:"Pilih parent Category"},on:{click:e.openCategory},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"edit"},on:{click:e.openCategory}})]},proxy:!0}],null,!1,1610663434)}):e._e(),e.categorySelected?a("q-input",{attrs:{readonly:"",value:e.categorySelected.title,label:"Parent Category"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"close"},on:{click:e.clearCategorySelected}})]},proxy:!0}],null,!1,1368966500)}):e._e(),a("q-input",{attrs:{label:"Nama Kategori",required:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}}),a("q-input",{attrs:{mask:"####",label:"Urutan",required:""},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",t)},expression:"form.weight"}}),a("q-input",{attrs:{type:"textarea",rows:"3",label:"Deskripsi"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),e.form.category_id?e._e():[a("div",{staticClass:"border rounded q-pa-sm"},[a("div",[a("q-toggle",{attrs:{label:"Tampilkan produk di beranda"},model:{value:e.form.is_front,callback:function(t){e.$set(e.form,"is_front",t)},expression:"form.is_front"}}),a("div",{staticClass:"text-xs text-grey-6 q-pa-xs"},[e._v("\n                Pilihan apakah produk dibawah kategori ini akan di listing di halaman beranda\n              ")])],1)]),a("div",[a("div",{staticClass:"row items-center justify-between"},[a("q-btn",{staticClass:"mt-2 mr-2",attrs:{label:"Upload Ikon",size:"sm",color:"primary",icon:"upload",type:"button"},on:{click:function(t){return t.preventDefault(),e.selectNewImage(t)}}}),a("q-btn",{staticClass:"mt-2 mr-2",attrs:{label:"Upload Banner",size:"sm",color:"teal",icon:"upload",type:"button"},on:{click:function(t){return t.preventDefault(),e.selectNewBanner(t)}}})],1),e.errors&&e.errors.images?a("div",{staticClass:"text-xs text-red q-my-md"},[e._v(" "+e._s(e.errors.images[0]))]):e._e()]),a("div",[a("input",{ref:"image",staticClass:"hidden",attrs:{type:"file"},on:{change:e.updateImagePreview}}),a("input",{ref:"banner",staticClass:"hidden",attrs:{type:"file"},on:{change:e.updateBannerPreview}}),e.imagePreview?a("div",{staticClass:"q-my-lg"},[a("div",{staticClass:"text-weight-bold text-md"},[e._v("Ikon")]),a("q-list",{attrs:{bordered:""}},[a("q-item",[a("q-item-section",[a("img",{staticClass:"q-pa-xs bg-white",staticStyle:{width:"80px",height:"auto","object-fit":"contain"},attrs:{src:e.imagePreview}})]),a("q-space"),a("q-item-section",{attrs:{side:""}},[a("q-btn",{attrs:{size:"sm",color:"red",glossy:"",round:"",icon:"delete"},on:{click:e.removeImage}})],1)],1)],1)],1):e._e()]),e.bannerPreview?a("div",{staticClass:"q-my-lg"},[a("div",{staticClass:"text-weight-bold text-md"},[e._v("Banner")]),a("q-list",{attrs:{bordered:""}},[a("q-item",[a("q-item-section",[a("img",{staticClass:"q-pa-xs bg-white",staticStyle:{width:"100%",height:"100px","object-fit":"contain"},attrs:{src:e.bannerPreview}})]),a("q-space"),a("q-item-section",{attrs:{side:""}},[a("q-btn",{attrs:{size:"sm",color:"red",glossy:"",round:"",icon:"delete"},on:{click:e.removeBanner}})],1)],1)],1)],1):e._e()],a("q-card-actions",{staticClass:"justify-end sticky-bottom bg-white q-mt-md"},[a("q-btn",{attrs:{disabled:e.loading,flat:"",label:"Batal",color:"dark"},on:{click:e.closeModal}}),a("q-btn",{attrs:{loading:e.loading,flat:"",label:"Simpan",color:"primary"},on:{click:e.submit}})],1)],2)])],1),a("q-page-sticky",{staticClass:"lt-sm",attrs:{position:"bottom-right",offset:[18,18]}},[a("q-btn",{attrs:{glossy:"",fab:"",icon:"add",color:"primary"},on:{click:e.addButton}})],1)],1)},o=[],r=a("ded3"),n=a.n(r),s=(a("a4d3"),a("e01a"),a("d3b7"),a("e6cf"),a("a79d"),a("2f62")),l=a("391e"),c={components:{CategoryBlock:l["a"]},name:"Categories",data:function(){return{isOpenSelect:!1,modalShow:!1,modal:!1,removeId:null,selectedCategory:null,categorySelected:null,imagePreview:"",bannerPreview:"",images:"",form:{id:"",images:"",title:"",description:"",category_id:"",is_front:!0,weight:1,banner:"",remove_banner:!1}}},computed:n()({},Object(s["e"])({categories:function(e){return e.category.categoryAll},errors:function(e){return e.errors},loading:function(e){return e.loading}})),methods:n()(n()({},Object(s["b"])("category",["categoryStore","getCategories","getCategory","categoryUpdate","getAllCategories","categoryDelete"])),{},{remove:function(e){var t=this;this.removeId=e,this.$q.dialog({title:"Konfirmasi Penghapusan Item",message:"Yakin akan menghapus data?",ok:{label:"Hapus",flat:!0,"no-caps":!0},cancel:{label:"Batal",flat:!0,"no-caps":!0}}).onOk((function(){t.categoryDelete(t.removeId).then((function(){t.getAllCategories(),t.clearCategorySelected()}))})).onCancel((function(){console.log("Cancel")})).onDismiss((function(){}))},selectNewImage:function(){this.$refs.image.click()},selectNewBanner:function(){this.$refs.banner.click()},updateBannerPreview:function(){var e=this,t=this.$refs.banner.files[0];if(t){this.form.banner=t;var a=new FileReader;a.onload=function(t){e.bannerPreview=t.target.result},a.readAsDataURL(t)}},updateImagePreview:function(){var e=this,t=this.$refs.image.files[0];if(t){this.form.images=t;var a=new FileReader;a.onload=function(t){e.imagePreview=t.target.result},a.readAsDataURL(t)}},openCategory:function(){this.isOpenSelect=!0},onSelectCategory:function(e){this.form.category_id=e.id,this.categorySelected=e,this.isOpenSelect=!1},onCloseSelectableCategory:function(){this.isOpenSelect=!1},clearCategorySelected:function(){this.isOpenSelect=!1,this.categorySelected=null,this.form.category_id=""},addButton:function(){this.clearForm(),this.modalShow=!0,this.form._method="POST",this.formType="Add",this.form.weight=this.categories.data.length+1},onEditButton:function(e){var t=e.category,a=e.parent;this.clearForm(),this.formType="Edit",this.form._method="PUT",this.form.id=t.id,this.form.title=t.title,this.form.weight=t.weight,this.form.description=t.description?t.description:"",this.form.category_id=t.category_id,this.form.is_front=t.is_front,this.imagePreview=t.src?t.src:"",this.categorySelected=a,this.modalShow=!0},closeModal:function(){this.clearCategorySelected(),this.modalShow=!1,this.clearForm()},clearForm:function(){this.form.id="",this.form.title="",this.form.description="",this.form.weight=1,this.form.is_front=!0,this.form.is_special="",this.form.images="",this.form.banner="",this.form.remove_banner=!1,this.imagePreview="",this.bannerPreview=""},onClearSelectableCategory:function(){console.log("clearable")},onRemoveCategory:function(e){var t=this;this.clearCategorySelected(),this.removeId=e,this.$q.dialog({title:"Konfirmasi Penghapusan Item",message:"Yakin akan menghapus data?",ok:{label:"Hapus",flat:!0,"no-caps":!0},cancel:{label:"Batal",flat:!0,"no-caps":!0}}).onOk((function(){t.removeCategory()})).onCancel((function(){console.log("Cancel")})).onDismiss((function(){}))},removeCategory:function(){var e=this;this.categoryDelete(this.removeId).then((function(){e.REMOVE_CATEGORY(e.removeId)}))},submit:function(){var e=this;this.$store.commit("SET_LOADING",!0);var t=new FormData;t.append("title",this.form.title),t.append("description",this.form.description),this.form.category_id||(t.append("images",this.form.images),t.append("banner",this.form.banner)),t.append("weight",this.form.weight),t.append("is_front",this.form.is_front),t.append("category_id",this.form.category_id),"Edit"==this.formType&&t.append("remove_banner",this.form.remove_banner),"Add"==this.formType&&(t.append("_method","POST"),this.categoryStore(t).then((function(){e.getAllCategories(),e.clearCategorySelected(),e.modalShow=!1})).finally((function(){return e.$store.commit("SET_LOADING",!1)}))),"Edit"==this.formType&&(t.append("_method","PUT"),this.categoryUpdate({id:this.form.id,data:t}).then((function(){e.getAllCategories(),e.clearCategorySelected(),e.modalShow=!1})).finally((function(){return e.$store.commit("SET_LOADING",!1)})))},removeImage:function(){this.imagePreview="",this.form.images=""},removeBanner:function(){this.bannerPreview="",this.form.banner="",this.form.remove_banner=!0}}),created:function(){this.categories.data.length||this.getAllCategories()}},d=c,m=a("2877"),g=a("9989"),f=a("e359"),h=a("65c6"),p=a("9c40"),u=a("6ac5"),b=a("1c1c"),y=a("3b73"),v=a("66e5"),C=a("4074"),w=a("068f"),S=a("0170"),_=a("b047"),q=a("74f7"),k=a("e669"),x=a("de5e"),P=a("24e8"),I=a("f09f"),Q=a("27f9"),T=a("9564"),B=a("2c91"),O=a("4b7e"),A=a("eebe"),D=a.n(A),E=Object(m["a"])(d,i,o,!1,null,null,null);t["default"]=E.exports;D()(E,"components",{QPage:g["a"],QHeader:f["a"],QToolbar:h["a"],QBtn:p["a"],QToolbarTitle:u["a"],QList:b["a"],QExpansionItem:y["a"],QItem:v["a"],QItemSection:C["a"],QImg:w["a"],QItemLabel:S["a"],QChip:_["a"],QInnerLoading:q["a"],QSpinnerFacebook:k["a"],QPageSticky:x["a"],QDialog:P["a"],QCard:I["a"],QInput:Q["a"],QToggle:T["a"],QSpace:B["a"],QCardActions:O["a"]})}}]);