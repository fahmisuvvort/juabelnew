(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[61],{f55e:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",{staticClass:"q-pb-xl"},[o("q-header",[o("q-toolbar",[o("q-btn",{attrs:{to:{name:"Settings"},flat:"",round:"",dense:"",icon:"arrow_back"}}),o("q-toolbar-title",[t._v("\n       Pengaturan Toko\n      ")])],1)],1),o("div",{staticClass:"q-pa-md q-gutter-y-md"},[o("div",{staticClass:"q-gutter-y-md"},[o("q-input",{attrs:{label:"Nama Toko"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),o("q-input",{attrs:{label:"Nomor Whatsapp",placeholder:"0812*******"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}}),t.errors.phone?o("div",{staticClass:"q-my-xs text-red text-sm"},[t._v("Nomor Whatsapp harus berupa angka")]):t._e(),o("q-input",{attrs:{autogrow:"",label:"Deskripsi Toko"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),o("div",{staticClass:"q-my-md"},[o("div",{staticClass:"text-grey-8 q-mb-sm",attrs:{for:""}},[t._v("Alamat Tampilan Toko")]),o("q-editor",{attrs:{toolbar:[["bold","italic","underline"]]},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)],1),o("div",[o("input",{ref:"image",staticClass:"hidden",attrs:{type:"file"},on:{change:t.updateImagePreview}}),o("q-btn",{staticClass:"mt-2 mr-2",attrs:{label:"Upload Logo",size:"sm",color:"primary",icon:"upload",type:"button"},on:{click:function(e){return e.preventDefault(),t.handleBtnUpload(e)}}}),t.errors.logo?o("div",{staticClass:"text-xs text-red q-my-md"},[t._v(" "+t._s(t.errors.logo[0]))]):t._e()],1),t.imagePreview?o("q-list",[o("q-item",[o("q-item-section",{attrs:{top:""}},[o("img",{staticClass:"shadow-4 q-pa-xs bg-grey",staticStyle:{width:"100px",height:"100px","object-fit":"contain"},attrs:{src:t.imagePreview}})]),o("q-space"),o("q-item-section",{attrs:{side:""}},[o("div",{staticClass:"text-grey-8 q-gutter-xs"},[o("q-btn",{attrs:{size:"sm",round:"",icon:"delete",glossy:"",color:"red"},on:{click:t.removeLogo}})],1)])],1)],1):t._e()],1),o("q-footer",{staticClass:"q-pa-sm bg-white"},[o("q-btn",{staticClass:"full-width",attrs:{loading:t.isLoading,label:"Simpan Data",color:"primary"},on:{click:t.save}},[o("q-tooltip",{staticClass:"bg-accent"},[t._v("Simpan Data")])],1)],1)],1)},s=[],i=(o("b0c0"),o("a4d3"),o("e01a"),o("758b")),r={data:function(){return{provinceOptions:[],subdistrictOptions:[],cityOptions:[],toko:null,isLoading:!1,form:{name:"",phone:"",address:"",description:"",logo:"",is_remove_logo:!1},imagePreview:""}},computed:{config:function(){return this.$store.state.config},dataToko:function(){return this.$store.state.shop},errors:function(){return this.$store.state.errors}},methods:{save:function(){var t=this;this.isLoading=!0;var e=this,o=new FormData;for(var a in this.form)this.form[a]&&null!=this.form[a]&&"null"!=this.form[a]&&o.append(a,this.form[a]);Object(i["a"])().post("shop",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(o){e.isLoading=!1,200==o.status&&(e.$store.commit("SET_SHOP",o.data.results),t.$q.notify({type:"positive",message:"Berhasil menyimpan data"}),e.$router.push({name:"Settings"}))})).catch((function(o){e.isLoading=!1,t.$q.notify({type:"negative",message:"Gagal menyimpan data, Coba refresh halaman"})}))},handleBtnUpload:function(){this.$refs.image.click()},updateImagePreview:function(){var t=this;this.form.logo=this.$refs.image.files[0];var e=new FileReader;e.onload=function(e){t.imagePreview=e.target.result},e.readAsDataURL(this.$refs.image.files[0])},removeLogo:function(){this.toko.logo_path&&(this.form.is_remove_logo=!0),this.form.logo="",this.imagePreview=""},setDataToko:function(){this.form.name=this.toko.name?this.toko.name:"",this.form.phone=this.toko.phone?this.toko.phone:"",this.form.address=this.toko.address?this.toko.address:"",this.form.description=this.toko.description?this.toko.description:"",this.imagePreview=this.toko.logo?this.toko.logo:""}},mounted:function(){if(this.dataToko)this.toko=this.dataToko,this.setDataToko();else{var t=this;Object(i["a"])().get("shop").then((function(e){200==e.status&&(t.toko=e.data.results,t.setDataToko(),t.$store.commit("SET_SHOP",e.data.results))}))}}},n=r,l=o("2877"),c=o("9989"),m=o("e359"),d=o("65c6"),p=o("9c40"),h=o("6ac5"),f=o("27f9"),u=o("d66b"),g=o("1c1c"),v=o("66e5"),b=o("4074"),k=o("2c91"),q=o("7ff0"),w=o("05c0"),y=o("eebe"),_=o.n(y),x=Object(l["a"])(n,a,s,!1,null,null,null);e["default"]=x.exports;_()(x,"components",{QPage:c["a"],QHeader:m["a"],QToolbar:d["a"],QBtn:p["a"],QToolbarTitle:h["a"],QInput:f["a"],QEditor:u["a"],QList:g["a"],QItem:v["a"],QItemSection:b["a"],QSpace:k["a"],QFooter:q["a"],QTooltip:w["a"]})}}]);