(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[57],{a08d:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("q-header",[a("q-toolbar",[a("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],attrs:{flat:"",round:"",dense:"",icon:"arrow_back"}}),a("q-toolbar-title",[e._v("\n       List Seller\n      ")]),a("q-btn",{attrs:{icon:"add_circle",label:"Seller",flat:""},on:{click:e.handleAddSeller}})],1)],1),a("div",{staticClass:"q-pa-md row justify-between items-center q-gutter-sm"},[a("div",{staticClass:"col"},[a("q-input",{attrs:{square:"",outlined:"",dense:"",debounce:"1000",placeholder:"Ketik nama, email atau nomor telpon user"},on:{input:e.findSeller},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("div",{staticClass:"col-auto",staticStyle:{width:"60px"}},[a("q-input",{attrs:{square:"",outlined:"",dense:"",label:"Show",type:"number",min:"4"},model:{value:e.take,callback:function(t){e.take=t},expression:"take"}})],1),a("div",{staticClass:"col-auto"},[a("q-btn",{attrs:{label:"reset",unelevated:"",color:"primary"},on:{click:e.reset}})],1)]),a("div",[a("q-list",{attrs:{separator:""}},[a("q-item",[a("q-item-section",{attrs:{side:""}},[e._v("#")]),a("q-item-section",[e._v("Info Seller")]),a("q-item-section",{attrs:{side:""}},[e._v("Aksi")])],1),e._l(e.users,(function(t,s){return a("q-item",{key:s},[a("q-item-section",{attrs:{side:"",top:""}},[e._v(e._s(s+1))]),a("q-item-section",{attrs:{top:""}},[a("div",[e._v(e._s(t.name))]),a("div",[e._v(e._s(t.email))]),a("div",[e._v(e._s(t.phone))])]),a("q-item-section",{staticClass:"q-gutter-sm",attrs:{side:""}},[a("q-btn",{attrs:{size:"sm",color:"blue",round:"",unelevated:"",icon:"edit"},on:{click:function(a){return e.handleEditSelller(t)}}},[a("q-tooltip",[e._v("\n                Edit seller\n              ")])],1),a("q-btn",{attrs:{size:"sm",color:"red-6",round:"",unelevated:"",icon:"delete"},on:{click:function(a){return e.handleDeleteSeller(t.id)}}},[a("q-tooltip",[e._v("\n                Hapus Seller\n              ")])],1)],1)],1)})),e.userNotAvailable?a("q-item",[a("q-item-section",{staticClass:"text-center q-py-md"},[e._v("\n            Tidak ada data\n          ")])],1):e._e()],2),a("div",{staticClass:"q-py-md flex justify-center"},[e.canLoad?a("q-btn",{attrs:{loading:e.load,label:"Loadmore",color:"primary",outline:""},on:{click:e.loadSeller}}):e._e()],1)],1),a("q-dialog",{model:{value:e.addModal,callback:function(t){e.addModal=t},expression:"addModal"}},[a("q-card",{staticClass:"card-medium"},[a("div",{staticClass:"card-heading"},[e._v(e._s(e.form.type)+" Seller")]),a("q-card-section",[a("q-form",{staticClass:"q-gutter-y-md",on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[a("q-input",{attrs:{filled:"",required:"",label:"Nama Seller"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),a("q-input",{attrs:{filled:"",required:"",label:"Email seller"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),a("q-input",{attrs:{filled:"",required:"",label:"Ponsel Seller"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),a("q-input",{attrs:{filled:"",required:"",label:"Nama Toko"},model:{value:e.form.shop_name,callback:function(t){e.$set(e.form,"shop_name",t)},expression:"form.shop_name"}}),a("div",[a("q-input",{attrs:{type:e.isPwd?"password":"text",filled:"",required:"",label:"Password"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility":"visibility_off"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),"Edit"==e.form.type?a("div",{staticClass:"text-xs text-amber-8"},[e._v("Kosongkan jika tidak ganti password")]):e._e()],1),"Edit"==e.form.type?a("q-select",{attrs:{label:"Role",filled:"",required:"",options:e.roles},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}}):e._e(),a("div",{staticClass:"flex justify-end q-pt-md"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Batal",flat:"",color:"primary"}}),a("q-btn",{attrs:{loading:e.loading,label:"Submit",type:"submit",color:"primary",unelevated:""}})],1)],1)],1)],1)],1)],1)},l=[],i=a("448a"),o=a.n(i),n=(a("b0c0"),a("d3b7"),a("e6cf"),a("a79d"),a("99af"),a("ac1f"),a("841c"),a("758b")),r={name:"SellerIndex",data:function(){return{users:[],take:10,canLoad:!1,search:"",userNotAvailable:!1,deleteId:null,addModal:!1,load:!1,isPwd:!0,roles:["admin","seller","customer"],form:{id:"",type:"Tambah",name:"",shop_name:"",email:"",phone:"",role:"",password:""}}},mounted:function(){this.users.length<this.take&&this.getSeller()},computed:{isDesktop:function(){return window.innerWidth>600},loading:function(){return this.$store.state.loading}},methods:{handleAddSeller:function(){this.form.type="Tambah",this.clearForm(),this.addModal=!0},handleEditSelller:function(e){this.form.type="Edit",this.form.id=e.id,this.form.name=e.name,this.form.email=e.email,this.form.role=e.role,this.form.password=e.password,this.form.phone=e.phone,this.addModal=!0},clearForm:function(){this.form.name="",this.form.phone="",this.form.email="",this.form.password=""},getSeller:function(){var e=this;this.$q.loading.show(),Object(n["a"])().get("sellers?take=".concat(this.take,"&skip=").concat(this.users.length)).then((function(t){200==t.status&&(e.users=t.data.results,console.log(e.users),e.canLoad=t.data.results.length==e.take,e.userNotAvailable=!e.users.length)})).finally((function(){e.$q.loading.hide()}))},loadSeller:function(){var e=this;this.load=!0,Object(n["a"])().get("sellers?take=".concat(this.take,"&skip=").concat(this.users.length)).then((function(t){200==t.status&&(e.users=[].concat(o()(e.users),o()(t.data.results)),e.canLoad=t.data.results.length==e.take,e.userNotAvailable=!e.users.length)})).finally((function(){e.load=!1}))},findSeller:function(){var e=this;this.search&&Object(n["a"])().get("findSeller/"+this.search).then((function(t){200==t.status&&(e.users=t.data.results,e.userNotAvailable=!e.users.length)}))},submit:function(){var e=this;this.$store.commit("SET_LOADING",!0),"Tambah"==this.form.type&&(this.form._method="POST",this.$store.dispatch("seller/storeSeller",this.form).then((function(){e.addModal=!1,e.getSeller()})).finally((function(){e.$store.commit("SET_LOADING",!1)}))),"Edit"==this.form.type&&(this.form._method="PUT",this.$store.dispatch("seller/updateSeller",this.form).then((function(){e.addModal=!1,e.getSeller(),e.form.id=""})).finally((function(){e.$store.commit("SET_LOADING",!1)})))},reset:function(){this.users=[],this.search="",this.getSeller()},handleDeleteSeller:function(e){var t=this;1!=e?this.$q.dialog({title:"Yakin akan menghapus user?",message:"Data yang di hapus tidak dapat dikembalikan",cancel:!0}).onOk((function(){t.deleteSeller(e)})):this.$q.notify({type:"negative",message:"User admin tidak bisa di hapus"})},handleDisableSeller:function(e){var t=this;this.$q.dialog({title:"Yakin akan NON aktifkan toko?",cancel:!0}).onOk((function(){t.disableSeller(e)}))},handleEnableSeller:function(e){var t=this;this.$q.dialog({title:"Yakin akan mengaktifkan toko?",cancel:!0}).onOk((function(){t.enableSeller(e)}))},disableSeller:function(e){var t=this;Object(n["a"])().post("setSellerStatus",{id:e,status:"disable"}).then((function(e){200==e.status&&t.reset()}))},enableSeller:function(e){var t=this;Object(n["a"])().post("setSellerStatus",{id:e,status:"enable"}).then((function(e){200==e.status&&t.reset()}))},deleteSeller:function(e){var t=this;this.$store.commit("SET_LOADING",!0),Object(n["a"])().delete("user/"+e).then((function(e){200==e.status&&t.reset()})).finally((function(){t.$store.commit("SET_LOADING",!1)}))}}},d=r,c=a("2877"),u=a("9989"),m=a("e359"),f=a("65c6"),h=a("9c40"),p=a("6ac5"),b=a("27f9"),v=a("1c1c"),k=a("66e5"),q=a("4074"),S=a("05c0"),g=a("24e8"),_=a("f09f"),y=a("a370"),w=a("0378"),$=a("0016"),x=a("ddd8"),O=a("2eeb"),C=a("7f67"),N=a("eebe"),Q=a.n(N),T=Object(c["a"])(d,s,l,!1,null,null,null);t["default"]=T.exports;Q()(T,"components",{QPage:u["a"],QHeader:m["a"],QToolbar:f["a"],QBtn:h["a"],QToolbarTitle:p["a"],QInput:b["a"],QList:v["a"],QItem:k["a"],QItemSection:q["a"],QTooltip:S["a"],QDialog:g["a"],QCard:_["a"],QCardSection:y["a"],QForm:w["a"],QIcon:$["a"],QSelect:x["a"]}),Q()(T,"directives",{GoBack:O["a"],ClosePopup:C["a"]})}}]);